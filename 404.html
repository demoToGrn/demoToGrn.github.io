<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><!--[if lte IE 8]><script src="assets/js/html5shiv.js"></script><![endif]--><!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css"/><![endif]--><!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css"/><![endif]--><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.css"><noscript>&lt;link rel="stylesheet" href="assets/css/noscript.css" /&gt;</noscript><script src="http://hm.baidu.com/hm.js?1fd3af480ea526e0aff7b82398738b9d"></script><script type="text/javascript">try{var AG_onLoad=function(e){"complete"===document.readyState||"interactive"===document.readyState?e():document.addEventListener?document.addEventListener("DOMContentLoaded",e):document.attachEvent&&document.attachEvent("DOMContentLoaded",e)},AG_removeElementById=function(e){var t=document.getElementById(e);t&&t.parentNode&&t.parentNode.removeChild(t)},AG_removeElementBySelector=function(e){if(document.querySelectorAll){var t=document.querySelectorAll(e);if(t)for(var n=0;n<t.length;n++)t[n]&&t[n].parentNode&&t[n].parentNode.removeChild(t[n])}},AG_each=function(e,t){if(document.querySelectorAll)for(var n=document.querySelectorAll(e),o=0;o<n.length;o++)t(n[o])},AG_removeParent=function(e,t){for(;e&&e.parentNode;){if(t(e))return void e.parentNode.removeChild(e);e=e.parentNode}};navigator.getBattery=void 0,window.Ya=window.Ya||{},window.Ya.Metrika=function(){var e=function(){};this.addFileExtension=e,this.extLink=e,this.file=e,this.hit=e,this.notBounce=e,this.params=e,this.reachGoal=e,this.replacePhones=e,this.clickmap=e,this.trackLinks=e};var _gaq=[],_gat={_getTracker:function(){return{_initData:function(){},_trackPageview:function(){},_trackEvent:function(){},_setAllowLinker:function(){},_setCustomVar:function(){}}},_createTracker:function(){return this._getTracker()},_anonymizeIp:function(){}};function urchinTracker(){}var addthis={init:function(){},addEventListener:function(){},button:function(){},counter:function(){},update:function(){},toolbox:function(){},layers:function(){}}}catch(e){console.error("Error executing AG js: "+e)}</script></head><body class><style>
@charset "UTF-8";
@import url(font-awesome.min.css);

/*
  Identity by HTML5 UP
  html5up.net | @ajlkn
  Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
*/

/* Reset */

  html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
  }

  article, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section {
    display: block;
  }

  body {
    line-height: 1;
  }

  ol, ul {
    list-style: none;
  }

  blockquote, q {
    quotes: none;
  }

  blockquote:before, blockquote:after, q:before, q:after {
    content: '';
    content: none;
  }

  table {
    border-collapse: collapse;
    border-spacing: 0;
  }

  body {
    -webkit-text-size-adjust: none;
  }

/* Box Model */

  *, *:before, *:after {
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
  }

/* Basic */

  @media screen and (max-width: 480px) {

    html, body {
      min-width: 320px;
    }

  }

  body.is-loading *, body.is-loading *:before, body.is-loading *:after {
    -moz-animation: none !important;
    -webkit-animation: none !important;
    -ms-animation: none !important;
    animation: none !important;
    -moz-transition: none !important;
    -webkit-transition: none !important;
    -ms-transition: none !important;
    transition: none !important;
  }

  html {
    height: 100%;
        overflow: hidden;
  }

  body {
    height: 100%;
    background-color: #ffffff;
    background-image: url("images/overlay.png"), -moz-linear-gradient(60deg, rgba(255, 165, 150, 0.5) 5%, rgba(0, 228, 255, 0.35)), url("../../images/bg.jpg");
    background-image: url("images/overlay.png"), -webkit-linear-gradient(60deg, rgba(255, 165, 150, 0.5) 5%, rgba(0, 228, 255, 0.35)), url("../../images/bg.jpg");
    background-image: url("images/overlay.png"), -ms-linear-gradient(60deg, rgba(255, 165, 150, 0.5) 5%, rgba(0, 228, 255, 0.35)), url("../../images/bg.jpg");
    background-image: url("images/overlay.png"), linear-gradient(60deg, rgba(255, 165, 150, 0.5) 5%, rgba(0, 228, 255, 0.35)), url("../../images/bg.jpg");
    background-repeat: repeat,      no-repeat,      no-repeat;
    background-size: 100px 100px, cover,        cover;
    background-position: top left,    center center,    bottom center;
    background-attachment: fixed,     fixed,        fixed;
  }

    body:after {
      content: '';
      display: block;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: inherit;
      opacity: 0;
      z-index: 1;
      background-color: #ffffff;
      background-image: url("images/overlay.png"), -moz-linear-gradient(60deg, rgba(255, 165, 150, 0.5) 5%, rgba(0, 228, 255, 0.35));
      background-image: url("images/overlay.png"), -webkit-linear-gradient(60deg, rgba(255, 165, 150, 0.5) 5%, rgba(0, 228, 255, 0.35));
      background-image: url("images/overlay.png"), -ms-linear-gradient(60deg, rgba(255, 165, 150, 0.5) 5%, rgba(0, 228, 255, 0.35));
      background-image: url("images/overlay.png"), linear-gradient(60deg, rgba(255, 165, 150, 0.5) 5%, rgba(0, 228, 255, 0.35));
      background-repeat: repeat,      no-repeat;
      background-size: 100px 100px, cover;
      background-position: top left,    center center;
      -moz-transition: opacity 1.75s ease-out;
      -webkit-transition: opacity 1.75s ease-out;
      -ms-transition: opacity 1.75s ease-out;
      transition: opacity 1.75s ease-out;
    }

    body.is-loading:after {
      opacity: 1;
    }

/* Type */

  body, input, select, textarea {
    color: #414f57;
    font-family: "Source Sans Pro", Helvetica, sans-serif;
    font-size: 14pt;
    font-weight: 300;
    line-height: 2;
    letter-spacing: 0.2em;
    text-transform: uppercase;
  }

    @media screen and (max-width: 1680px) {

      body, input, select, textarea {
        font-size: 11pt;
      }

    }

    @media screen and (max-width: 480px) {

      body, input, select, textarea {
        font-size: 10pt;
        line-height: 1.75;
      }

    }

  a {
    -moz-transition: color 0.2s ease, border-color 0.2s ease;
    -webkit-transition: color 0.2s ease, border-color 0.2s ease;
    -ms-transition: color 0.2s ease, border-color 0.2s ease;
    transition: color 0.2s ease, border-color 0.2s ease;
    color: inherit;
    text-decoration: none;
  }

    a:before {
      -moz-transition: color 0.2s ease, text-shadow 0.2s ease;
      -webkit-transition: color 0.2s ease, text-shadow 0.2s ease;
      -ms-transition: color 0.2s ease, text-shadow 0.2s ease;
      transition: color 0.2s ease, text-shadow 0.2s ease;
    }

    a:hover {
      color: #ff7496;
    }

  strong, b {
    color: #313f47;
  }

  em, i {
    font-style: italic;
  }

  p {
    margin: 0 0 1.5em 0;
  }

  h1, h2, h3, h4, h5, h6 {
    color: #313f47;
    line-height: 1.5;
    margin: 0 0 0.75em 0;
  }

    h1 a, h2 a, h3 a, h4 a, h5 a, h6 a {
      color: inherit;
      text-decoration: none;
    }

  h1 {
    font-size: 1.85em;
    letter-spacing: 0.22em;
    margin: 0 0 0.525em 0;
  }

  h2 {
    font-size: 1.25em;
  }

  h3 {
    font-size: 1em;
  }

  h4 {
    font-size: 1em;
  }

  h5 {
    font-size: 1em;
  }

  h6 {
    font-size: 1em;
  }

  @media screen and (max-width: 480px) {

    h1 {
      font-size: 1.65em;
    }

  }

  sub {
    font-size: 0.8em;
    position: relative;
    top: 0.5em;
  }

  sup {
    font-size: 0.8em;
    position: relative;
    top: -0.5em;
  }

  hr {
    border: 0;
    border-bottom: solid 1px #c8cccf;
    margin: 3em 0;
  }

/* Form */

  form {
    margin: 0 0 1.5em 0;
  }

    form > .field {
      margin: 0 0 1.5em 0;
    }

      form > .field > :last-child {
        margin-bottom: 0;
      }

  label {
    color: #313f47;
    display: block;
    font-size: 0.9em;
    margin: 0 0 0.75em 0;
  }

  input[type="text"],
  input[type="password"],
  input[type="email"],
  input[type="tel"],
  select,
  textarea {
    -moz-appearance: none;
    -webkit-appearance: none;
    -ms-appearance: none;
    appearance: none;
    border-radius: 4px;
    border: solid 1px #c8cccf;
    color: inherit;
    display: block;
    outline: 0;
    padding: 0 1em;
    text-decoration: none;
    width: 100%;
  }

    input[type="text"]:invalid,
    input[type="password"]:invalid,
    input[type="email"]:invalid,
    input[type="tel"]:invalid,
    select:invalid,
    textarea:invalid {
      box-shadow: none;
    }

    input[type="text"]:focus,
    input[type="password"]:focus,
    input[type="email"]:focus,
    input[type="tel"]:focus,
    select:focus,
    textarea:focus {
      border-color: #ff7496;
    }

  .select-wrapper {
    text-decoration: none;
    display: block;
    position: relative;
  }

    .select-wrapper:before {
      content: "ÔÅ∏";
      -moz-osx-font-smoothing: grayscale;
      -webkit-font-smoothing: antialiased;
      font-family: FontAwesome;
      font-style: normal;
      font-weight: normal;
      text-transform: none !important;
    }

    .select-wrapper:before {
      color: #c8cccf;
      display: block;
      height: 2.75em;
      line-height: 2.75em;
      pointer-events: none;
      position: absolute;
      right: 0;
      text-align: center;
      top: 0;
      width: 2.75em;
    }

    .select-wrapper select::-ms-expand {
      display: none;
    }

  input[type="text"],
  input[type="password"],
  input[type="email"],
  select {
    height: 2.75em;
  }

  textarea {
    padding: 0.75em 1em;
  }

  input[type="checkbox"],
  input[type="radio"] {
    -moz-appearance: none;
    -webkit-appearance: none;
    -ms-appearance: none;
    appearance: none;
    display: block;
    float: left;
    margin-right: -2em;
    opacity: 0;
    width: 1em;
    z-index: -1;
  }

    input[type="checkbox"] + label,
    input[type="radio"] + label {
      text-decoration: none;
      color: #414f57;
      cursor: pointer;
      display: inline-block;
      font-size: 1em;
      font-weight: 300;
      padding-left: 2.4em;
      padding-right: 0.75em;
      position: relative;
    }

      input[type="checkbox"] + label:before,
      input[type="radio"] + label:before {
        -moz-osx-font-smoothing: grayscale;
        -webkit-font-smoothing: antialiased;
        font-family: FontAwesome;
        font-style: normal;
        font-weight: normal;
        text-transform: none !important;
      }

      input[type="checkbox"] + label:before,
      input[type="radio"] + label:before {
        border-radius: 4px;
        border: solid 1px #c8cccf;
        content: '';
        display: inline-block;
        height: 1.65em;
        left: 0;
        line-height: 1.58125em;
        position: absolute;
        text-align: center;
        top: 0.15em;
        width: 1.65em;
      }

    input[type="checkbox"]:checked + label:before,
    input[type="radio"]:checked + label:before {
      color: #ff7496;
      content: '\f00c';
    }

    input[type="checkbox"]:focus + label:before,
    input[type="radio"]:focus + label:before {
      border-color: #ff7496;
    }

  input[type="checkbox"] + label:before {
    border-radius: 4px;
  }

  input[type="radio"] + label:before {
    border-radius: 100%;
  }

  ::-webkit-input-placeholder {
    color: #616f77 !important;
    opacity: 1.0;
  }

  :-moz-placeholder {
    color: #616f77 !important;
    opacity: 1.0;
  }

  ::-moz-placeholder {
    color: #616f77 !important;
    opacity: 1.0;
  }

  :-ms-input-placeholder {
    color: #616f77 !important;
    opacity: 1.0;
  }

  .formerize-placeholder {
    color: #616f77 !important;
    opacity: 1.0;
  }

/* Icon */

  .icon {
    text-decoration: none;
    position: relative;
    border-bottom: none;
  }

    .icon:before {
      -moz-osx-font-smoothing: grayscale;
      -webkit-font-smoothing: antialiased;
      font-family: FontAwesome;
      font-style: normal;
      font-weight: normal;
      text-transform: none !important;
    }

    .icon > .label {
      display: none;
    }

/* List */

  ol {
    list-style: decimal;
    margin: 0 0 1.5em 0;
    padding-left: 1.25em;
  }

    ol li {
      padding-left: 0.25em;
    }

  ul {
    list-style: disc;
    margin: 0 0 1.5em 0;
    padding-left: 1em;
  }

    ul li {
      padding-left: 0.5em;
    }

    ul.alt {
      list-style: none;
      padding-left: 0;
    }

      ul.alt li {
        border-top: solid 1px #c8cccf;
        padding: 0.5em 0;
      }

        ul.alt li:first-child {
          border-top: 0;
          padding-top: 0;
        }

    ul.icons {
      cursor: default;
      list-style: none;
      padding-left: 0;
      margin-top: -0.675em;
    }

      ul.icons li {
        display: inline-block;
        padding: 0.675em 0.5em;
      }

        ul.icons li a {
          text-decoration: none;
          position: relative;
          display: block;
          width: 3.75em;
          height: 3.75em;
          border-radius: 100%;
          border: solid 1px #c8cccf;
          line-height: 3.75em;
          overflow: hidden;
          text-align: center;
          text-indent: 3.75em;
          white-space: nowrap;
        }

          ul.icons li a:before {
            -moz-osx-font-smoothing: grayscale;
            -webkit-font-smoothing: antialiased;
            font-family: FontAwesome;
            font-style: normal;
            font-weight: normal;
            text-transform: none !important;
          }

          ul.icons li a:before {
            color: #ffffff;
            text-shadow: 1.25px 0px 0px #c8cccf, -1.25px 0px 0px #c8cccf, 0px 1.25px 0px #c8cccf, 0px -1.25px 0px #c8cccf;
          }

          ul.icons li a:hover:before {
            text-shadow: 1.25px 0px 0px #ff7496, -1.25px 0px 0px #ff7496, 0px 1.25px 0px #ff7496, 0px -1.25px 0px #ff7496;
          }

          ul.icons li a:before {
            position: absolute;
            top: 0;
            left: 0;
            width: inherit;
            height: inherit;
            font-size: 1.85rem;
            line-height: inherit;
            text-align: center;
            text-indent: 0;
          }

          ul.icons li a:hover {
            border-color: #ff7496;
          }

      @media screen and (max-width: 480px) {

        ul.icons li a:before {
          font-size: 1.5rem;
        }

      }

    ul.actions {
      cursor: default;
      list-style: none;
      padding-left: 0;
    }

      ul.actions li {
        display: inline-block;
        padding: 0 0.75em 0 0;
        vertical-align: middle;
      }

        ul.actions li:last-child {
          padding-right: 0;
        }

  dl {
    margin: 0 0 1.5em 0;
  }

    dl dt {
      display: block;
      margin: 0 0 0.75em 0;
    }

    dl dd {
      margin-left: 1.5em;
    }

/* Button */

  input[type="submit"],
  input[type="reset"],
  input[type="button"],
  button,
  .button {
    -moz-appearance: none;
    -webkit-appearance: none;
    -ms-appearance: none;
    appearance: none;
    -moz-transition: background-color 0.2s ease-in-out, border-color 0.2s ease-in-out, color 0.2s ease-in-out;
    -webkit-transition: background-color 0.2s ease-in-out, border-color 0.2s ease-in-out, color 0.2s ease-in-out;
    -ms-transition: background-color 0.2s ease-in-out, border-color 0.2s ease-in-out, color 0.2s ease-in-out;
    transition: background-color 0.2s ease-in-out, border-color 0.2s ease-in-out, color 0.2s ease-in-out;
    display: inline-block;
    height: 2.75em;
    line-height: 2.75em;
    padding: 0 1.5em;
    background-color: transparent;
    border-radius: 4px;
    border: solid 1px #c8cccf;
    color: #414f57 !important;
    cursor: pointer;
    text-align: center;
    text-decoration: none;
    white-space: nowrap;
  }

    input[type="submit"]:hover,
    input[type="reset"]:hover,
    input[type="button"]:hover,
    button:hover,
    .button:hover {
      border-color: #ff7496;
      color: #ff7496 !important;
    }

    input[type="submit"].icon,
    input[type="reset"].icon,
    input[type="button"].icon,
    button.icon,
    .button.icon {
      padding-left: 1.35em;
    }

      input[type="submit"].icon:before,
      input[type="reset"].icon:before,
      input[type="button"].icon:before,
      button.icon:before,
      .button.icon:before {
        margin-right: 0.5em;
      }

    input[type="submit"].fit,
    input[type="reset"].fit,
    input[type="button"].fit,
    button.fit,
    .button.fit {
      display: block;
      width: 100%;
      margin: 0 0 0.75em 0;
    }

    input[type="submit"].small,
    input[type="reset"].small,
    input[type="button"].small,
    button.small,
    .button.small {
      font-size: 0.8em;
    }

    input[type="submit"].big,
    input[type="reset"].big,
    input[type="button"].big,
    button.big,
    .button.big {
      font-size: 1.35em;
    }

    input[type="submit"].disabled, input[type="submit"]:disabled,
    input[type="reset"].disabled,
    input[type="reset"]:disabled,
    input[type="button"].disabled,
    input[type="button"]:disabled,
    button.disabled,
    button:disabled,
    .button.disabled,
    .button:disabled {
      -moz-pointer-events: none;
      -webkit-pointer-events: none;
      -ms-pointer-events: none;
      pointer-events: none;
      opacity: 0.5;
    }

/* Main */

  #main {
    position: relative;
    max-width: 100%;
    min-width: 27em;
    padding: 4.5em 3em 3em 3em ;

    border-radius: 4px;
    cursor: default;
    opacity: 0.95;
    text-align: center;
    -moz-transform-origin: 50% 50%;
    -webkit-transform-origin: 50% 50%;
    -ms-transform-origin: 50% 50%;
    transform-origin: 50% 50%;
    -moz-transform: rotateX(0deg);
    -webkit-transform: rotateX(0deg);
    -ms-transform: rotateX(0deg);
    transform: rotateX(0deg);
    -moz-transition: opacity 1s ease, -moz-transform 1s ease;
    -webkit-transition: opacity 1s ease, -webkit-transform 1s ease;
    -ms-transition: opacity 1s ease, -ms-transform 1s ease;
    transition: opacity 1s ease, transform 1s ease;
  }

    #main .avatar {
      position: relative;
      display: block;
      margin-bottom: 1.5em;
    }

      #main .avatar img {
        display: block;
        margin: 0 auto;
        border-radius: 100%;
      }

      #main .avatar:before {
        display: block;
        position: absolute;
        top: 50%;
        left: -3em;
        width: calc(100% + 6em);
        height: 1px;
        z-index: -1;
        background: #c8cccf;
      }

    @media screen and (max-width: 480px) {

      #main {
        min-width: 0;
        width: 100%;
        padding: 4em 2em 2.5em 2em ;
      }

        #main .avatar:before {
          left: -2em;
          width: calc(100% + 4em);
        }

    }

    body.is-loading #main {
      opacity: 0;
      -moz-transform: rotateX(15deg);
      -webkit-transform: rotateX(15deg);
      -ms-transform: rotateX(15deg);
      transform: rotateX(15deg);
    }

/* Footer */

  #footer {
    -moz-align-self: -moz-flex-end;
    -webkit-align-self: -webkit-flex-end;
    -ms-align-self: -ms-flex-end;
    align-self: flex-end;
    width: 100%;
    padding: 1.5em 0 0 0;
    color: rgba(255, 255, 255, 0.75);
    cursor: default;
    text-align: center;
  }

    #footer .copyright {
      padding: 0;
      font-size: 0.9em;
      list-style: none;
    }

      #footer .copyright li {
        display: inline-block;
        margin: 0 0 0 0.45em;
        padding: 0 0 0 0.85em;
        border-left: solid 1px rgba(255, 255, 255, 0.5);
        line-height: 1;
      }

        #footer .copyright li:first-child {
          border-left: 0;
        }

/* Wrapper */

  #wrapper {
    display: -moz-flex;
    display: -webkit-flex;
    display: -ms-flex;
    display: flex;
    -moz-align-items: center;
    -webkit-align-items: center;
    -ms-align-items: center;
    align-items: center;
    -moz-justify-content: space-between;
    -webkit-justify-content: space-between;
    -ms-justify-content: space-between;
    justify-content: space-between;
    -moz-flex-direction: column;
    -webkit-flex-direction: column;
    -ms-flex-direction: column;
    flex-direction: column;
    -moz-perspective: 1000px;
    -webkit-perspective: 1000px;
    -ms-perspective: 1000px;
    perspective: 1000px;
    position: relative;
    min-height: 100%;
    padding: 1.5em;
    z-index: 2;
  }

    #wrapper > * {
      z-index: 1;
    }

    #wrapper:before {
      content: '';
      display: block;
    }

    @media screen and (max-width: 360px) {

      #wrapper {
        padding: 0.75em;
      }

    }

    body.is-ie #wrapper {
      height: 100%;
    }


canvas {
    padding:0;
    margin:0;
position: absolute;
    z-index: -1;
left:0px;

}

</style><canvas id="sakura" width="1366" height="667"></canvas><div id="wrapper"><section id="main"><header> <span class="avatar"><a href="https://saltedfish.org"><img src="/images/avatar.gif" height="122px" width="122px"></a></span><h1 style="color:#fff">Page Not Found !</h1></header><footer><ul class="icons"><li><a href="https://saltedfish.org" target="_parent" title="Home" class="fa-home">Blog</a></li><li><a href="https://github.com/demoToGrn" target="_blank" title="Github" class="fa-github">Github</a></li><li><a href="https://weibo.com/mixfuc" target="_blank" title="Weibo" class="fa-weibo">Weibo</a></li></ul></footer></section><footer id="footer"><ul class="copyright"><li>¬©<a href="https://saltedfish.org">SaltedFish</a></li><li>Life is fantastic !</li></ul></footer></div> <!--[if lte IE 8]><script src="assets/js/respond.min.js"></script><![endif]--><script>"addEventListener"in window&&(window.addEventListener("load",function(){document.body.className=document.body.className.replace(/\bis-loading\b/,"")}),document.body.className+=navigator.userAgent.match(/(MSIE|rv:11\.0)/)?" is-ie":"")</script><script id="sakura_point_vsh" type="x-shader/x_vertex">
uniform mat4 uProjection;
uniform mat4 uModelview;
uniform vec3 uResolution;
uniform vec3 uOffset;
uniform vec3 uDOF;  //x:focus distance, y:focus radius, z:max radius
uniform vec3 uFade; //x:start distance, y:half distance, z:near fade start

attribute vec3 aPosition;
attribute vec3 aEuler;
attribute vec2 aMisc; //x:size, y:fade

varying vec3 pposition;
varying float psize;
varying float palpha;
varying float pdist;

//varying mat3 rotMat;
varying vec3 normX;
varying vec3 normY;
varying vec3 normZ;
varying vec3 normal;

varying float diffuse;
varying float specular;
varying float rstop;
varying float distancefade;

void main(void) {
    // Projection is based on vertical angle
    vec4 pos = uModelview * vec4(aPosition + uOffset, 1.0);
    gl_Position = uProjection * pos;
    gl_PointSize = aMisc.x * uProjection[1][1] / -pos.z * uResolution.y * 0.5;

    pposition = pos.xyz;
    psize = aMisc.x;
    pdist = length(pos.xyz);
    palpha = smoothstep(0.0, 1.0, (pdist - 0.1) / uFade.z);

    vec3 elrsn = sin(aEuler);
    vec3 elrcs = cos(aEuler);
    mat3 rotx = mat3(
        1.0, 0.0, 0.0,
        0.0, elrcs.x, elrsn.x,
        0.0, -elrsn.x, elrcs.x
    );
    mat3 roty = mat3(
        elrcs.y, 0.0, -elrsn.y,
        0.0, 1.0, 0.0,
        elrsn.y, 0.0, elrcs.y
    );
    mat3 rotz = mat3(
        elrcs.z, elrsn.z, 0.0,
        -elrsn.z, elrcs.z, 0.0,
        0.0, 0.0, 1.0
    );
    mat3 rotmat = rotx * roty * rotz;
    normal = rotmat[2];

    mat3 trrotm = mat3(
        rotmat[0][0], rotmat[1][0], rotmat[2][0],
        rotmat[0][1], rotmat[1][1], rotmat[2][1],
        rotmat[0][2], rotmat[1][2], rotmat[2][2]
    );
    normX = trrotm[0];
    normY = trrotm[1];
    normZ = trrotm[2];

    const vec3 lit = vec3(0.6917144638660746, 0.6917144638660746, -0.20751433915982237);

    float tmpdfs = dot(lit, normal);
    if(tmpdfs < 0.0) {
        normal = -normal;
        tmpdfs = dot(lit, normal);
    }
    diffuse = 0.4 + tmpdfs;

    vec3 eyev = normalize(-pos.xyz);
    if(dot(eyev, normal) > 0.0) {
        vec3 hv = normalize(eyev + lit);
        specular = pow(max(dot(hv, normal), 0.0), 20.0);
    }
    else {
        specular = 0.0;
    }

    rstop = clamp((abs(pdist - uDOF.x) - uDOF.y) / uDOF.z, 0.0, 1.0);
    rstop = pow(rstop, 0.5);
    //-0.69315 = ln(0.5)
    distancefade = min(1.0, exp((uFade.x - pdist) * 0.69315 / uFade.y));
}
</script><script id="sakura_point_fsh" type="x-shader/x_fragment">
#ifdef GL_ES
//precision mediump float;
precision highp float;
#endif

uniform vec3 uDOF;  //x:focus distance, y:focus radius, z:max radius
uniform vec3 uFade; //x:start distance, y:half distance, z:near fade start

const vec3 fadeCol = vec3(0.08, 0.03, 0.06);

varying vec3 pposition;
varying float psize;
varying float palpha;
varying float pdist;

//varying mat3 rotMat;
varying vec3 normX;
varying vec3 normY;
varying vec3 normZ;
varying vec3 normal;

varying float diffuse;
varying float specular;
varying float rstop;
varying float distancefade;

float ellipse(vec2 p, vec2 o, vec2 r) {
    vec2 lp = (p - o) / r;
    return length(lp) - 1.0;
}

void main(void) {
    vec3 p = vec3(gl_PointCoord - vec2(0.5, 0.5), 0.0) * 2.0;
    vec3 d = vec3(0.0, 0.0, -1.0);
    float nd = normZ.z; //dot(-normZ, d);
    if(abs(nd) < 0.0001) discard;

    float np = dot(normZ, p);
    vec3 tp = p + d * np / nd;
    vec2 coord = vec2(dot(normX, tp), dot(normY, tp));

    //angle = 15 degree
    const float flwrsn = 0.258819045102521;
    const float flwrcs = 0.965925826289068;
    mat2 flwrm = mat2(flwrcs, -flwrsn, flwrsn, flwrcs);
    vec2 flwrp = vec2(abs(coord.x), coord.y) * flwrm;

    float r;
    if(flwrp.x < 0.0) {
        r = ellipse(flwrp, vec2(0.065, 0.024) * 0.5, vec2(0.36, 0.96) * 0.5);
    }
    else {
        r = ellipse(flwrp, vec2(0.065, 0.024) * 0.5, vec2(0.58, 0.96) * 0.5);
    }

    if(r > rstop) discard;

    vec3 col = mix(vec3(1.0, 0.8, 0.75), vec3(1.0, 0.9, 0.87), r);
    float grady = mix(0.0, 1.0, pow(coord.y * 0.5 + 0.5, 0.35));
    col *= vec3(1.0, grady, grady);
    col *= mix(0.8, 1.0, pow(abs(coord.x), 0.3));
    col = col * diffuse + specular;

    col = mix(fadeCol, col, distancefade);

    float alpha = (rstop > 0.001)? (0.5 - r / (rstop * 2.0)) : 1.0;
    alpha = smoothstep(0.0, 1.0, alpha) * palpha;

    gl_FragColor = vec4(col * 0.5, alpha);
}
</script><script id="fx_common_vsh" type="x-shader/x_vertex">
uniform vec3 uResolution;
attribute vec2 aPosition;

varying vec2 texCoord;
varying vec2 screenCoord;

void main(void) {
    gl_Position = vec4(aPosition, 0.0, 1.0);
    texCoord = aPosition.xy * 0.5 + vec2(0.5, 0.5);
    screenCoord = aPosition.xy * vec2(uResolution.z, 1.0);
}
</script><script id="bg_fsh" type="x-shader/x_fragment">
#ifdef GL_ES
//precision mediump float;
precision highp float;
#endif

uniform vec2 uTimes;

varying vec2 texCoord;
varying vec2 screenCoord;

void main(void) {
    vec3 col;
    float c;
    vec2 tmpv = texCoord * vec2(0.8, 1.0) - vec2(0.95, 1.0);
    c = exp(-pow(length(tmpv) * 1.8, 2.0));
    col = mix(vec3(0.02, 0.0, 0.03), vec3(0.96, 0.98, 1.0) * 1.5, c);
    gl_FragColor = vec4(col * 0.5, 1.0);
}
</script><script id="fx_brightbuf_fsh" type="x-shader/x_fragment">
#ifdef GL_ES
//precision mediump float;
precision highp float;
#endif
uniform sampler2D uSrc;
uniform vec2 uDelta;

varying vec2 texCoord;
varying vec2 screenCoord;

void main(void) {
    vec4 col = texture2D(uSrc, texCoord);
    gl_FragColor = vec4(col.rgb * 2.0 - vec3(0.5), 1.0);
}
</script><script id="fx_dirblur_r4_fsh" type="x-shader/x_fragment">
#ifdef GL_ES
//precision mediump float;
precision highp float;
#endif
uniform sampler2D uSrc;
uniform vec2 uDelta;
uniform vec4 uBlurDir; //dir(x, y), stride(z, w)

varying vec2 texCoord;
varying vec2 screenCoord;

void main(void) {
    vec4 col = texture2D(uSrc, texCoord);
    col = col + texture2D(uSrc, texCoord + uBlurDir.xy * uDelta);
    col = col + texture2D(uSrc, texCoord - uBlurDir.xy * uDelta);
    col = col + texture2D(uSrc, texCoord + (uBlurDir.xy + uBlurDir.zw) * uDelta);
    col = col + texture2D(uSrc, texCoord - (uBlurDir.xy + uBlurDir.zw) * uDelta);
    gl_FragColor = col / 5.0;
}
</script><script id="fx_common_fsh" type="x-shader/x_fragment">
#ifdef GL_ES
//precision mediump float;
precision highp float;
#endif
uniform sampler2D uSrc;
uniform vec2 uDelta;

varying vec2 texCoord;
varying vec2 screenCoord;

void main(void) {
    gl_FragColor = texture2D(uSrc, texCoord);
}
</script><script id="pp_final_vsh" type="x-shader/x_vertex">
uniform vec3 uResolution;
attribute vec2 aPosition;
varying vec2 texCoord;
varying vec2 screenCoord;
void main(void) {
    gl_Position = vec4(aPosition, 0.0, 1.0);
    texCoord = aPosition.xy * 0.5 + vec2(0.5, 0.5);
    screenCoord = aPosition.xy * vec2(uResolution.z, 1.0);
}
</script><script id="pp_final_fsh" type="x-shader/x_fragment">
#ifdef GL_ES
//precision mediump float;
precision highp float;
#endif
uniform sampler2D uSrc;
uniform sampler2D uBloom;
uniform vec2 uDelta;
varying vec2 texCoord;
varying vec2 screenCoord;
void main(void) {
    vec4 srccol = texture2D(uSrc, texCoord) * 2.0;
    vec4 bloomcol = texture2D(uBloom, texCoord);
    vec4 col;
    col = srccol + bloomcol * (vec4(1.0) + srccol);
    col *= smoothstep(1.0, 0.0, pow(length((texCoord - vec2(0.5)) * 2.0), 1.2) * 0.5);
    col = pow(col, vec4(0.45454545454545)); //(1.0 / 2.2)

    gl_FragColor = vec4(col.rgb, 1.0);
    gl_FragColor.a = 1.0;
}
</script><script>var Vector3={},Matrix44={};Vector3.create=function(e,r,t){return{x:e,y:r,z:t}},Vector3.dot=function(e,r){return e.x*r.x+e.y*r.y+e.z*r.z},Vector3.cross=function(e,r,t){e.x=r.y*t.z-r.z*t.y,e.y=r.z*t.x-r.x*t.z,e.z=r.x*t.y-r.y*t.x},Vector3.normalize=function(e){var r=e.x*e.x+e.y*e.y+e.z*e.z;1e-5<r&&(r=1/Math.sqrt(r),e.x*=r,e.y*=r,e.z*=r)},Vector3.arrayForm=function(e){return e.array?(e.array[0]=e.x,e.array[1]=e.y,e.array[2]=e.z):e.array=new Float32Array([e.x,e.y,e.z]),e.array},Matrix44.createIdentity=function(){return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])},Matrix44.loadProjection=function(e,r,t,o,n){var a=o*Math.tan(t*Math.PI/180*.5)*2,i=a*r;e[0]=2*o/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o/a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=-(n+o)/(n-o),e[11]=-1,e[12]=0,e[13]=0,e[14]=-2*n*o/(n-o),e[15]=0},Matrix44.loadLookAt=function(e,r,t,o){var n=Vector3.create(r.x-t.x,r.y-t.y,r.z-t.z);Vector3.normalize(n);var a=Vector3.create(1,0,0);Vector3.cross(a,o,n),Vector3.normalize(a);var i=Vector3.create(1,0,0);Vector3.cross(i,n,a),Vector3.normalize(i),e[0]=a.x,e[1]=i.x,e[2]=n.x,e[3]=0,e[4]=a.y,e[5]=i.y,e[6]=n.y,e[7]=0,e[8]=a.z,e[9]=i.z,e[10]=n.z,e[11]=0,e[12]=-(r.x*e[0]+r.y*e[4]+r.z*e[8]),e[13]=-(r.x*e[1]+r.y*e[5]+r.z*e[9]),e[14]=-(r.x*e[2]+r.y*e[6]+r.z*e[10]),e[15]=1};var gl,timeInfo={start:0,prev:0,delta:0,elapsed:0},renderSpec={width:0,height:0,aspect:1,array:new Float32Array(3),halfWidth:0,halfHeight:0,halfArray:new Float32Array(3)};function deleteRenderTarget(e){gl.deleteFramebuffer(e.frameBuffer),gl.deleteRenderbuffer(e.renderBuffer),gl.deleteTexture(e.texture)}function createRenderTarget(e,r){var t={width:e,height:r,sizeArray:new Float32Array([e,r,e/r]),dtxArray:new Float32Array([1/e,1/r])};return t.frameBuffer=gl.createFramebuffer(),t.renderBuffer=gl.createRenderbuffer(),t.texture=gl.createTexture(),gl.bindTexture(gl.TEXTURE_2D,t.texture),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,e,r,0,gl.RGBA,gl.UNSIGNED_BYTE,null),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR),gl.bindFramebuffer(gl.FRAMEBUFFER,t.frameBuffer),gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.TEXTURE_2D,t.texture,0),gl.bindRenderbuffer(gl.RENDERBUFFER,t.renderBuffer),gl.renderbufferStorage(gl.RENDERBUFFER,gl.DEPTH_COMPONENT16,e,r),gl.framebufferRenderbuffer(gl.FRAMEBUFFER,gl.DEPTH_ATTACHMENT,gl.RENDERBUFFER,t.renderBuffer),gl.bindTexture(gl.TEXTURE_2D,null),gl.bindRenderbuffer(gl.RENDERBUFFER,null),gl.bindFramebuffer(gl.FRAMEBUFFER,null),t}function compileShader(e,r){var t=gl.createShader(e);if(gl.shaderSource(t,r),gl.compileShader(t),gl.getShaderParameter(t,gl.COMPILE_STATUS))return t;var o=gl.getShaderInfoLog(t);return gl.deleteShader(t),console.error(o),null}function createShader(e,r,t,o){var n=compileShader(gl.VERTEX_SHADER,e),a=compileShader(gl.FRAGMENT_SHADER,r);if(null==n||null==a)return null;var i=gl.createProgram();if(gl.attachShader(i,n),gl.attachShader(i,a),gl.deleteShader(n),gl.deleteShader(a),gl.linkProgram(i),!gl.getProgramParameter(i,gl.LINK_STATUS)){var l=gl.getProgramInfoLog(i);return console.error(l),null}if(t){i.uniforms={};for(var f=0;f<t.length;f++)i.uniforms[t[f]]=gl.getUniformLocation(i,t[f])}if(o){i.attributes={};for(f=0;f<o.length;f++){var c=o[f];i.attributes[c]=gl.getAttribLocation(i,c)}}return i}function useShader(e){for(var r in gl.useProgram(e),e.attributes)gl.enableVertexAttribArray(e.attributes[r])}function unuseShader(e){for(var r in e.attributes)gl.disableVertexAttribArray(e.attributes[r]);gl.useProgram(null)}renderSpec.setSize=function(e,r){renderSpec.width=e,renderSpec.height=r,renderSpec.aspect=renderSpec.width/renderSpec.height,renderSpec.array[0]=renderSpec.width,renderSpec.array[1]=renderSpec.height,renderSpec.array[2]=renderSpec.aspect,renderSpec.halfWidth=Math.floor(e/2),renderSpec.halfHeight=Math.floor(r/2),renderSpec.halfArray[0]=renderSpec.halfWidth,renderSpec.halfArray[1]=renderSpec.halfHeight,renderSpec.halfArray[2]=renderSpec.halfWidth/renderSpec.halfHeight};var projection={angle:60,nearfar:new Float32Array([.1,100]),matrix:Matrix44.createIdentity()},camera={position:Vector3.create(0,0,100),lookat:Vector3.create(0,0,0),up:Vector3.create(0,1,0),dof:Vector3.create(10,4,8),matrix:Matrix44.createIdentity()},pointFlower={},meshFlower={},sceneStandBy=!1,BlossomParticle=function(){this.velocity=new Array(3),this.rotation=new Array(3),this.position=new Array(3),this.euler=new Array(3),this.size=1,this.alpha=1,this.zkey=0};function createPointFlowers(){var e=gl.getParameter(gl.ALIASED_POINT_SIZE_RANGE);renderSpec.pointSize={min:e[0],max:e[1]};var r=document.getElementById("sakura_point_vsh").textContent,t=document.getElementById("sakura_point_fsh").textContent;pointFlower.program=createShader(r,t,["uProjection","uModelview","uResolution","uOffset","uDOF","uFade"],["aPosition","aEuler","aMisc"]),useShader(pointFlower.program),pointFlower.offset=new Float32Array([0,0,0]),pointFlower.fader=Vector3.create(0,10,0),pointFlower.numFlowers=1600,pointFlower.particles=new Array(pointFlower.numFlowers),pointFlower.dataArray=new Float32Array(8*pointFlower.numFlowers),pointFlower.positionArrayOffset=0,pointFlower.eulerArrayOffset=3*pointFlower.numFlowers,pointFlower.miscArrayOffset=6*pointFlower.numFlowers,pointFlower.buffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,pointFlower.buffer),gl.bufferData(gl.ARRAY_BUFFER,pointFlower.dataArray,gl.DYNAMIC_DRAW),gl.bindBuffer(gl.ARRAY_BUFFER,null),unuseShader(pointFlower.program);for(var o=0;o<pointFlower.numFlowers;o++)pointFlower.particles[o]=new BlossomParticle}function initPointFlowers(){pointFlower.area=Vector3.create(20,20,20),pointFlower.area.x=pointFlower.area.y*renderSpec.aspect,pointFlower.fader.x=10,pointFlower.fader.y=pointFlower.area.z,pointFlower.fader.z=.1;for(var e=2*Math.PI,r=Vector3.create(0,0,0),t=0,o=function(){return 2*Math.random()-1},n=0;n<pointFlower.numFlowers;n++){var a=pointFlower.particles[n];r.x=.3*o()+.8,r.y=.2*o()-1,r.z=.3*o()+.5,Vector3.normalize(r),t=2+1*Math.random(),a.setVelocity(r.x*t,r.y*t,r.z*t),a.setRotation(o()*e*.5,o()*e*.5,o()*e*.5),a.setPosition(o()*pointFlower.area.x,o()*pointFlower.area.y,o()*pointFlower.area.z),a.setEulerAngles(Math.random()*Math.PI*2,Math.random()*Math.PI*2,Math.random()*Math.PI*2),a.setSize(.9+.1*Math.random())}}function renderPointFlowers(){for(var t=2*Math.PI,e=(pointFlower.area.x,pointFlower.area.y,pointFlower.area.z,function(e,r,t){Math.abs(e.position[r])-.5*e.size>t&&(0<e.position[r]?e.position[r]-=2*t:e.position[r]+=2*t)}),r=function(e,r){e.euler[r]=e.euler[r]%t,e.euler[r]<0&&(e.euler[r]+=t)},o=0;o<pointFlower.numFlowers;o++){(l=pointFlower.particles[o]).update(timeInfo.delta,timeInfo.elapsed),e(l,0,pointFlower.area.x),e(l,1,pointFlower.area.y),e(l,2,pointFlower.area.z),r(l,0),r(l,1),r(l,2),l.alpha=1,l.zkey=camera.matrix[2]*l.position[0]+camera.matrix[6]*l.position[1]+camera.matrix[10]*l.position[2]+camera.matrix[14]}pointFlower.particles.sort(function(e,r){return e.zkey-r.zkey});var n=pointFlower.positionArrayOffset,a=pointFlower.eulerArrayOffset,i=pointFlower.miscArrayOffset;for(o=0;o<pointFlower.numFlowers;o++){var l=pointFlower.particles[o];pointFlower.dataArray[n]=l.position[0],pointFlower.dataArray[n+1]=l.position[1],pointFlower.dataArray[n+2]=l.position[2],n+=3,pointFlower.dataArray[a]=l.euler[0],pointFlower.dataArray[a+1]=l.euler[1],pointFlower.dataArray[a+2]=l.euler[2],a+=3,pointFlower.dataArray[i]=l.size,pointFlower.dataArray[i+1]=l.alpha,i+=2}gl.enable(gl.BLEND),gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA);var f=pointFlower.program;useShader(f),gl.uniformMatrix4fv(f.uniforms.uProjection,!1,projection.matrix),gl.uniformMatrix4fv(f.uniforms.uModelview,!1,camera.matrix),gl.uniform3fv(f.uniforms.uResolution,renderSpec.array),gl.uniform3fv(f.uniforms.uDOF,Vector3.arrayForm(camera.dof)),gl.uniform3fv(f.uniforms.uFade,Vector3.arrayForm(pointFlower.fader)),gl.bindBuffer(gl.ARRAY_BUFFER,pointFlower.buffer),gl.bufferData(gl.ARRAY_BUFFER,pointFlower.dataArray,gl.DYNAMIC_DRAW),gl.vertexAttribPointer(f.attributes.aPosition,3,gl.FLOAT,!1,0,pointFlower.positionArrayOffset*Float32Array.BYTES_PER_ELEMENT),gl.vertexAttribPointer(f.attributes.aEuler,3,gl.FLOAT,!1,0,pointFlower.eulerArrayOffset*Float32Array.BYTES_PER_ELEMENT),gl.vertexAttribPointer(f.attributes.aMisc,2,gl.FLOAT,!1,0,pointFlower.miscArrayOffset*Float32Array.BYTES_PER_ELEMENT);for(o=1;o<2;o++){var c=-2*o;pointFlower.offset[0]=-1*pointFlower.area.x,pointFlower.offset[1]=-1*pointFlower.area.y,pointFlower.offset[2]=pointFlower.area.z*c,gl.uniform3fv(f.uniforms.uOffset,pointFlower.offset),gl.drawArrays(gl.POINT,0,pointFlower.numFlowers),pointFlower.offset[0]=-1*pointFlower.area.x,pointFlower.offset[1]=1*pointFlower.area.y,pointFlower.offset[2]=pointFlower.area.z*c,gl.uniform3fv(f.uniforms.uOffset,pointFlower.offset),gl.drawArrays(gl.POINT,0,pointFlower.numFlowers),pointFlower.offset[0]=1*pointFlower.area.x,pointFlower.offset[1]=-1*pointFlower.area.y,pointFlower.offset[2]=pointFlower.area.z*c,gl.uniform3fv(f.uniforms.uOffset,pointFlower.offset),gl.drawArrays(gl.POINT,0,pointFlower.numFlowers),pointFlower.offset[0]=1*pointFlower.area.x,pointFlower.offset[1]=1*pointFlower.area.y,pointFlower.offset[2]=pointFlower.area.z*c,gl.uniform3fv(f.uniforms.uOffset,pointFlower.offset),gl.drawArrays(gl.POINT,0,pointFlower.numFlowers)}pointFlower.offset[0]=0,pointFlower.offset[1]=0,pointFlower.offset[2]=0,gl.uniform3fv(f.uniforms.uOffset,pointFlower.offset),gl.drawArrays(gl.POINT,0,pointFlower.numFlowers),gl.bindBuffer(gl.ARRAY_BUFFER,null),unuseShader(f),gl.enable(gl.DEPTH_TEST),gl.disable(gl.BLEND)}function createEffectProgram(e,r,t,o){var n={},a=["uResolution","uSrc","uDelta"];t&&(a=a.concat(t));var i=["aPosition"];return o&&(i=i.concat(o)),n.program=createShader(e,r,a,i),useShader(n.program),n.dataArray=new Float32Array([-1,-1,1,-1,-1,1,1,1]),n.buffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,n.buffer),gl.bufferData(gl.ARRAY_BUFFER,n.dataArray,gl.STATIC_DRAW),gl.bindBuffer(gl.ARRAY_BUFFER,null),unuseShader(n.program),n}function useEffect(e,r){var t=e.program;useShader(t),gl.uniform3fv(t.uniforms.uResolution,renderSpec.array),null!=r&&(gl.uniform2fv(t.uniforms.uDelta,r.dtxArray),gl.uniform1i(t.uniforms.uSrc,0),gl.activeTexture(gl.TEXTURE0),gl.bindTexture(gl.TEXTURE_2D,r.texture))}function drawEffect(e){gl.bindBuffer(gl.ARRAY_BUFFER,e.buffer),gl.vertexAttribPointer(e.program.attributes.aPosition,2,gl.FLOAT,!1,0,0),gl.drawArrays(gl.TRIANGLE_STRIP,0,4)}function unuseEffect(e){unuseShader(e.program)}BlossomParticle.prototype.setVelocity=function(e,r,t){this.velocity[0]=e,this.velocity[1]=r,this.velocity[2]=t},BlossomParticle.prototype.setRotation=function(e,r,t){this.rotation[0]=e,this.rotation[1]=r,this.rotation[2]=t},BlossomParticle.prototype.setPosition=function(e,r,t){this.position[0]=e,this.position[1]=r,this.position[2]=t},BlossomParticle.prototype.setEulerAngles=function(e,r,t){this.euler[0]=e,this.euler[1]=r,this.euler[2]=t},BlossomParticle.prototype.setSize=function(e){this.size=e},BlossomParticle.prototype.update=function(e,r){this.position[0]+=this.velocity[0]*e,this.position[1]+=this.velocity[1]*e,this.position[2]+=this.velocity[2]*e,this.euler[0]+=this.rotation[0]*e,this.euler[1]+=this.rotation[1]*e,this.euler[2]+=this.rotation[2]*e};var effectLib={};function createEffectLib(){var e,r,t=document.getElementById("fx_common_vsh").textContent;r=document.getElementById("bg_fsh").textContent,effectLib.sceneBg=createEffectProgram(t,r,["uTimes"],null),r=document.getElementById("fx_brightbuf_fsh").textContent,effectLib.mkBrightBuf=createEffectProgram(t,r,null,null),r=document.getElementById("fx_dirblur_r4_fsh").textContent,effectLib.dirBlur=createEffectProgram(t,r,["uBlurDir"],null),e=document.getElementById("pp_final_vsh").textContent,r=document.getElementById("pp_final_fsh").textContent,effectLib.finalComp=createEffectProgram(e,r,["uBloom"],null)}function createBackground(){}function initBackground(){}function renderBackground(){gl.disable(gl.DEPTH_TEST),useEffect(effectLib.sceneBg,null),gl.uniform2f(effectLib.sceneBg.program.uniforms.uTimes,timeInfo.elapsed,timeInfo.delta),drawEffect(effectLib.sceneBg),unuseEffect(effectLib.sceneBg),gl.enable(gl.DEPTH_TEST)}var postProcess={};function createPostProcess(){}function initPostProcess(){}function renderPostProcess(){gl.enable(gl.TEXTURE_2D),gl.disable(gl.DEPTH_TEST);var e=function(e,r){gl.bindFramebuffer(gl.FRAMEBUFFER,e.frameBuffer),gl.viewport(0,0,e.width,e.height),r&&(gl.clearColor(0,0,0,0),gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT))};e(renderSpec.wHalfRT0,!0),useEffect(effectLib.mkBrightBuf,renderSpec.mainRT),drawEffect(effectLib.mkBrightBuf),unuseEffect(effectLib.mkBrightBuf);for(var r=0;r<2;r++){var t=1.5+1*r,o=2+1*r;e(renderSpec.wHalfRT1,!0),useEffect(effectLib.dirBlur,renderSpec.wHalfRT0),gl.uniform4f(effectLib.dirBlur.program.uniforms.uBlurDir,t,0,o,0),drawEffect(effectLib.dirBlur),unuseEffect(effectLib.dirBlur),e(renderSpec.wHalfRT0,!0),useEffect(effectLib.dirBlur,renderSpec.wHalfRT1),gl.uniform4f(effectLib.dirBlur.program.uniforms.uBlurDir,0,t,0,o),drawEffect(effectLib.dirBlur),unuseEffect(effectLib.dirBlur)}gl.bindFramebuffer(gl.FRAMEBUFFER,null),gl.viewport(0,0,renderSpec.width,renderSpec.height),gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT),useEffect(effectLib.finalComp,renderSpec.mainRT),gl.uniform1i(effectLib.finalComp.program.uniforms.uBloom,1),gl.activeTexture(gl.TEXTURE1),gl.bindTexture(gl.TEXTURE_2D,renderSpec.wHalfRT0.texture),drawEffect(effectLib.finalComp),unuseEffect(effectLib.finalComp),gl.enable(gl.DEPTH_TEST)}var SceneEnv={};function createScene(){createEffectLib(),createBackground(),createPointFlowers(),createPostProcess(),sceneStandBy=!0}function initScene(){initBackground(),initPointFlowers(),initPostProcess(),camera.position.z=pointFlower.area.z+projection.nearfar[0],projection.angle=180*Math.atan2(pointFlower.area.y,camera.position.z+pointFlower.area.z)/Math.PI*2,Matrix44.loadProjection(projection.matrix,renderSpec.aspect,projection.angle,projection.nearfar[0],projection.nearfar[1])}function renderScene(){Matrix44.loadLookAt(camera.matrix,camera.position,camera.lookat,camera.up),gl.enable(gl.DEPTH_TEST),gl.bindFramebuffer(gl.FRAMEBUFFER,renderSpec.mainRT.frameBuffer),gl.viewport(0,0,renderSpec.mainRT.width,renderSpec.mainRT.height),gl.clearColor(.005,0,.05,0),gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT),renderBackground(),renderPointFlowers(),renderPostProcess()}function onResize(e){makeCanvasFullScreen(document.getElementById("sakura")),setViewports(),sceneStandBy&&initScene()}function setViewports(){renderSpec.setSize(gl.canvas.width,gl.canvas.height),gl.clearColor(.2,.2,.5,1),gl.viewport(0,0,renderSpec.width,renderSpec.height);var e=function(e,r,t){var o=renderSpec[e];o&&deleteRenderTarget(o),renderSpec[e]=createRenderTarget(r,t)};e("mainRT",renderSpec.width,renderSpec.height),e("wFullRT0",renderSpec.width,renderSpec.height),e("wFullRT1",renderSpec.width,renderSpec.height),e("wHalfRT0",renderSpec.halfWidth,renderSpec.halfHeight),e("wHalfRT1",renderSpec.halfWidth,renderSpec.halfHeight)}function render(){renderScene()}var animating=!0;function toggleAnimation(e){(animating^=!0)&&animate(),e&&(e.innerHTML=animating?"Stop":"Start")}function stepAnimation(){animating||animate()}function animate(){var e=new Date;timeInfo.elapsed=(e-timeInfo.start)/1e3,timeInfo.delta=(e-timeInfo.prev)/1e3,timeInfo.prev=e,animating&&requestAnimationFrame(animate),render()}function makeCanvasFullScreen(e){var r=document.body,t=document.documentElement;fullw=Math.max(r.clientWidth,r.scrollWidth,t.scrollWidth,t.clientWidth),fullh=Math.max(r.clientHeight,r.scrollHeight,t.scrollHeight,t.clientHeight),e.width=fullw,e.height=fullh}window.addEventListener("load",function(e){var r=document.getElementById("sakura");try{makeCanvasFullScreen(r),gl=r.getContext("experimental-webgl")}catch(e){return alert("WebGL not supported."+e),void console.error(e)}window.addEventListener("resize",onResize),setViewports(),createScene(),initScene(),timeInfo.start=new Date,timeInfo.prev=timeInfo.start,animate()}),function(r,e){r["r"+e]=r["r"+e]||r["webkitR"+e]||r["mozR"+e]||r["msR"+e]||r["oR"+e]||function(e){r.setTimeout(e,1e3/60)}}(window,"equestAnimationFrame")</script><div style="display:none"><script type="text/javascript">var cnzz_protocol="https:"==document.location.protocol?" https://":" http://";document.write(unescape("%3Cspan id='cnzz_stat_icon_1257378141'%3E%3C/span%3E%3Cscript src='"+cnzz_protocol+"s95.cnzz.com/z_stat.php%3Fid%3D1257378141' type='text/javascript'%3E%3C/script%3E"))</script><span id="cnzz_stat_icon_1257378141"></span><script src="http://s95.cnzz.com/z_stat.php?id=1257378141" type="text/javascript"></script></div><div style="display:none">&lt;<script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?1fd3af480ea526e0aff7b82398738b9d";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script></div><div class="wsx_fade" style="pointer-events:none"></div><div class="wsx_scroll" style="display:block;opacity:1;pointer-events:none;top:0;height:520.121px"><div class="wsx_scroll_bar" style="background-color:#e00;opacity:.6;border-radius:3px;width:6px;left:19px"></div></div></body></html>